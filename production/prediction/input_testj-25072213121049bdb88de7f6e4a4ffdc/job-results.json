{"assets": {"openEO.nc": {"bands": [{"name": "lon"}, {"name": "lat"}], "eo:bands": [{"name": "lon"}, {"name": "lat"}], "href": "https://openeo.dataspace.copernicus.eu/openeo/1.2/jobs/j-25072213121049bdb88de7f6e4a4ffdc/results/assets/YTQyMWY4NDktMmFlNi00MmQzLTkzZjAtYjQzYWEyNTY3ZjFl/98733c65e2ee6da91ad74526c3ba1f3e/openEO.nc?expires=1753795293", "proj:bbox": [-591615.93, 9902302.232, -590905.93, 9905782.232], "proj:epsg": 3035, "proj:shape": [348, 71], "raster:bands": [{"name": "lon", "statistics": {"maximum": 0, "mean": 0, "minimum": 0, "stddev": 0, "valid_percent": 100}}, {"name": "lat", "statistics": {"maximum": 1, "mean": 1, "minimum": 1, "stddev": 0, "valid_percent": 100}}], "roles": ["data"], "title": "openEO.nc", "type": "application/x-netcdf"}}, "description": "Results for batch job j-25072213121049bdb88de7f6e4a4ffdc", "extent": {"spatial": {"bbox": [[-122.45, 37.74, -122.4, 37.78]]}, "temporal": {"interval": [["2023-06-01T00:00:00Z", "2023-08-01T00:00:00Z"]]}}, "id": "j-25072213121049bdb88de7f6e4a4ffdc", "license": "proprietary", "links": [{"href": "/eodata/Sentinel-2/MSI/L2A_N0500/2023/07/18/S2A_MSIL2A_20230718T184921_N0510_R113_T10SEG_20241014T064349.SAFE", "rel": "derived_from", "title": "Derived from /eodata/Sentinel-2/MSI/L2A_N0500/2023/07/18/S2A_MSIL2A_20230718T184921_N0510_R113_T10SEG_20241014T064349.SAFE", "type": "application/json"}, {"href": "/eodata/Sentinel-2/MSI/L2A_N0500/2023/06/23/S2B_MSIL2A_20230623T184919_N0510_R113_T10SEG_20240813T092536.SAFE", "rel": "derived_from", "title": "Derived from /eodata/Sentinel-2/MSI/L2A_N0500/2023/06/23/S2B_MSIL2A_20230623T184919_N0510_R113_T10SEG_20240813T092536.SAFE", "type": "application/json"}, {"href": "/eodata/Sentinel-2/MSI/L2A_N0500/2023/07/23/S2B_MSIL2A_20230723T184929_N0510_R113_T10SEG_20241019T115715.SAFE", "rel": "derived_from", "title": "Derived from /eodata/Sentinel-2/MSI/L2A_N0500/2023/07/23/S2B_MSIL2A_20230723T184929_N0510_R113_T10SEG_20241019T115715.SAFE", "type": "application/json"}, {"href": "/eodata/Sentinel-2/MSI/L2A_N0500/2023/07/08/S2A_MSIL2A_20230708T184921_N0510_R113_T10SEG_20241014T134017.SAFE", "rel": "derived_from", "title": "Derived from /eodata/Sentinel-2/MSI/L2A_N0500/2023/07/08/S2A_MSIL2A_20230708T184921_N0510_R113_T10SEG_20241014T134017.SAFE", "type": "application/json"}, {"href": "/eodata/Sentinel-2/MSI/L2A_N0500/2023/07/28/S2A_MSIL2A_20230728T184921_N0510_R113_T10SEG_20240911T130101.SAFE", "rel": "derived_from", "title": "Derived from /eodata/Sentinel-2/MSI/L2A_N0500/2023/07/28/S2A_MSIL2A_20230728T184921_N0510_R113_T10SEG_20240911T130101.SAFE", "type": "application/json"}, {"href": "/eodata/Sentinel-2/MSI/L2A_N0500/2023/06/03/S2B_MSIL2A_20230603T184919_N0510_R113_T10SEG_20240816T181839.SAFE", "rel": "derived_from", "title": "Derived from /eodata/Sentinel-2/MSI/L2A_N0500/2023/06/03/S2B_MSIL2A_20230603T184919_N0510_R113_T10SEG_20240816T181839.SAFE", "type": "application/json"}, {"href": "/eodata/Sentinel-2/MSI/L2A_N0500/2023/07/13/S2B_MSIL2A_20230713T184939_N0510_R113_T10SEG_20241016T032119.SAFE", "rel": "derived_from", "title": "Derived from /eodata/Sentinel-2/MSI/L2A_N0500/2023/07/13/S2B_MSIL2A_20230713T184939_N0510_R113_T10SEG_20241016T032119.SAFE", "type": "application/json"}, {"href": "/eodata/Sentinel-2/MSI/L2A_N0500/2023/06/28/S2A_MSIL2A_20230628T184921_N0510_R113_T10SEG_20240814T061321.SAFE", "rel": "derived_from", "title": "Derived from /eodata/Sentinel-2/MSI/L2A_N0500/2023/06/28/S2A_MSIL2A_20230628T184921_N0510_R113_T10SEG_20240814T061321.SAFE", "type": "application/json"}, {"href": "/eodata/Sentinel-2/MSI/L2A_N0500/2023/07/03/S2B_MSIL2A_20230703T184919_N0510_R113_T10SEG_20241015T011616.SAFE", "rel": "derived_from", "title": "Derived from /eodata/Sentinel-2/MSI/L2A_N0500/2023/07/03/S2B_MSIL2A_20230703T184919_N0510_R113_T10SEG_20241015T011616.SAFE", "type": "application/json"}, {"href": "/eodata/Sentinel-2/MSI/L2A_N0500/2023/06/13/S2B_MSIL2A_20230613T184919_N0510_R113_T10SEG_20240812T141354.SAFE", "rel": "derived_from", "title": "Derived from /eodata/Sentinel-2/MSI/L2A_N0500/2023/06/13/S2B_MSIL2A_20230613T184919_N0510_R113_T10SEG_20240812T141354.SAFE", "type": "application/json"}, {"href": "/eodata/Sentinel-2/MSI/L2A_N0500/2023/06/18/S2A_MSIL2A_20230618T184921_N0510_R113_T10SEG_20240910T045729.SAFE", "rel": "derived_from", "title": "Derived from /eodata/Sentinel-2/MSI/L2A_N0500/2023/06/18/S2A_MSIL2A_20230618T184921_N0510_R113_T10SEG_20240910T045729.SAFE", "type": "application/json"}, {"href": "/eodata/Sentinel-2/MSI/L2A_N0500/2023/06/08/S2A_MSIL2A_20230608T184921_N0510_R113_T10SEG_20240913T014258.SAFE", "rel": "derived_from", "title": "Derived from /eodata/Sentinel-2/MSI/L2A_N0500/2023/06/08/S2A_MSIL2A_20230608T184921_N0510_R113_T10SEG_20240913T014258.SAFE", "type": "application/json"}, {"href": "/eodata/Sentinel-2/MSI/L2A_N0500/2023/07/18/S2A_MSIL2A_20230718T184921_N0510_R113_T10SEG_20241014T064349.SAFE", "rel": "derived_from", "title": "Derived from /eodata/Sentinel-2/MSI/L2A_N0500/2023/07/18/S2A_MSIL2A_20230718T184921_N0510_R113_T10SEG_20241014T064349.SAFE", "type": "application/json"}, {"href": "/eodata/Sentinel-2/MSI/L2A_N0500/2023/06/23/S2B_MSIL2A_20230623T184919_N0510_R113_T10SEG_20240813T092536.SAFE", "rel": "derived_from", "title": "Derived from /eodata/Sentinel-2/MSI/L2A_N0500/2023/06/23/S2B_MSIL2A_20230623T184919_N0510_R113_T10SEG_20240813T092536.SAFE", "type": "application/json"}, {"href": "/eodata/Sentinel-2/MSI/L2A_N0500/2023/07/08/S2A_MSIL2A_20230708T184921_N0510_R113_T10SEG_20241014T134017.SAFE", "rel": "derived_from", "title": "Derived from /eodata/Sentinel-2/MSI/L2A_N0500/2023/07/08/S2A_MSIL2A_20230708T184921_N0510_R113_T10SEG_20241014T134017.SAFE", "type": "application/json"}, {"href": "/eodata/Sentinel-2/MSI/L2A_N0500/2023/07/23/S2B_MSIL2A_20230723T184929_N0510_R113_T10SEG_20241019T115715.SAFE", "rel": "derived_from", "title": "Derived from /eodata/Sentinel-2/MSI/L2A_N0500/2023/07/23/S2B_MSIL2A_20230723T184929_N0510_R113_T10SEG_20241019T115715.SAFE", "type": "application/json"}, {"href": "/eodata/Sentinel-2/MSI/L2A_N0500/2023/07/28/S2A_MSIL2A_20230728T184921_N0510_R113_T10SEG_20240911T130101.SAFE", "rel": "derived_from", "title": "Derived from /eodata/Sentinel-2/MSI/L2A_N0500/2023/07/28/S2A_MSIL2A_20230728T184921_N0510_R113_T10SEG_20240911T130101.SAFE", "type": "application/json"}, {"href": "/eodata/Sentinel-2/MSI/L2A_N0500/2023/06/03/S2B_MSIL2A_20230603T184919_N0510_R113_T10SEG_20240816T181839.SAFE", "rel": "derived_from", "title": "Derived from /eodata/Sentinel-2/MSI/L2A_N0500/2023/06/03/S2B_MSIL2A_20230603T184919_N0510_R113_T10SEG_20240816T181839.SAFE", "type": "application/json"}, {"href": "/eodata/Sentinel-2/MSI/L2A_N0500/2023/06/28/S2A_MSIL2A_20230628T184921_N0510_R113_T10SEG_20240814T061321.SAFE", "rel": "derived_from", "title": "Derived from /eodata/Sentinel-2/MSI/L2A_N0500/2023/06/28/S2A_MSIL2A_20230628T184921_N0510_R113_T10SEG_20240814T061321.SAFE", "type": "application/json"}, {"href": "/eodata/Sentinel-2/MSI/L2A_N0500/2023/07/13/S2B_MSIL2A_20230713T184939_N0510_R113_T10SEG_20241016T032119.SAFE", "rel": "derived_from", "title": "Derived from /eodata/Sentinel-2/MSI/L2A_N0500/2023/07/13/S2B_MSIL2A_20230713T184939_N0510_R113_T10SEG_20241016T032119.SAFE", "type": "application/json"}, {"href": "/eodata/Sentinel-2/MSI/L2A_N0500/2023/07/03/S2B_MSIL2A_20230703T184919_N0510_R113_T10SEG_20241015T011616.SAFE", "rel": "derived_from", "title": "Derived from /eodata/Sentinel-2/MSI/L2A_N0500/2023/07/03/S2B_MSIL2A_20230703T184919_N0510_R113_T10SEG_20241015T011616.SAFE", "type": "application/json"}, {"href": "/eodata/Sentinel-2/MSI/L2A_N0500/2023/06/13/S2B_MSIL2A_20230613T184919_N0510_R113_T10SEG_20240812T141354.SAFE", "rel": "derived_from", "title": "Derived from /eodata/Sentinel-2/MSI/L2A_N0500/2023/06/13/S2B_MSIL2A_20230613T184919_N0510_R113_T10SEG_20240812T141354.SAFE", "type": "application/json"}, {"href": "/eodata/Sentinel-2/MSI/L2A_N0500/2023/06/18/S2A_MSIL2A_20230618T184921_N0510_R113_T10SEG_20240910T045729.SAFE", "rel": "derived_from", "title": "Derived from /eodata/Sentinel-2/MSI/L2A_N0500/2023/06/18/S2A_MSIL2A_20230618T184921_N0510_R113_T10SEG_20240910T045729.SAFE", "type": "application/json"}, {"href": "/eodata/Sentinel-2/MSI/L2A_N0500/2023/06/08/S2A_MSIL2A_20230608T184921_N0510_R113_T10SEG_20240913T014258.SAFE", "rel": "derived_from", "title": "Derived from /eodata/Sentinel-2/MSI/L2A_N0500/2023/06/08/S2A_MSIL2A_20230608T184921_N0510_R113_T10SEG_20240913T014258.SAFE", "type": "application/json"}, {"href": "https://openeo.dataspace.copernicus.eu/openeo/1.2/jobs/j-25072213121049bdb88de7f6e4a4ffdc/results", "rel": "self", "type": "application/json"}, {"href": "https://openeo.dataspace.copernicus.eu/openeo/1.2/jobs/j-25072213121049bdb88de7f6e4a4ffdc/results/YTQyMWY4NDktMmFlNi00MmQzLTkzZjAtYjQzYWEyNTY3ZjFl/6eeaf5fb5f916ee410a2d9e49f6a4979?expires=1753795293", "rel": "canonical", "type": "application/json"}, {"href": "http://ceos.org/ard/files/PFS/SR/v5.0/CARD4L_Product_Family_Specification_Surface_Reflectance-v5.0.pdf", "rel": "card4l-document", "type": "application/pdf"}, {"href": "https://openeo.dataspace.copernicus.eu/openeo/1.2/jobs/j-25072213121049bdb88de7f6e4a4ffdc/results/items/YTQyMWY4NDktMmFlNi00MmQzLTkzZjAtYjQzYWEyNTY3ZjFl/98733c65e2ee6da91ad74526c3ba1f3e/openEO.nc?expires=1753795293", "rel": "item", "type": "application/geo+json"}], "openeo:status": "finished", "providers": [{"description": "This data was processed on an openEO backend maintained by VITO.", "name": "VITO", "processing:expression": {"expression": {"adddimension1": {"arguments": {"data": {"from_node": "apply2"}, "label": "lon", "name": "bands", "type": "bands"}, "process_id": "add_dimension"}, "adddimension2": {"arguments": {"data": {"from_node": "apply3"}, "label": "lat", "name": "bands", "type": "bands"}, "process_id": "add_dimension"}, "aggregatetemporalperiod1": {"arguments": {"data": {"from_node": "mask1"}, "period": "month", "reducer": {"process_graph": {"mean1": {"arguments": {"data": {"from_parameter": "data"}}, "process_id": "mean", "result": true}}}}, "process_id": "aggregate_temporal_period"}, "apply1": {"arguments": {"data": {"from_node": "aggregatetemporalperiod1"}, "process": {"process_graph": {"runudf1": {"arguments": {"context": {"crs": "EPSG:4326", "east": -122.4, "north": 37.78, "south": 37.74, "west": -122.45}, "data": {"from_parameter": "x"}, "runtime": "Python", "udf": "import numpy as np\nimport xarray as xr\nimport logging\nfrom pyproj import Transformer\nfrom typing import Dict\n\n# Setup logging\ndef _setup_logging() -> logging.Logger:\n    logging.basicConfig(level=logging.INFO, format=\"%(message)s\")\n    return logging.getLogger(__name__)\n\nlogger = _setup_logging()\n\ndef apply_datacube(cube: xr.DataArray, context: Dict) -> xr.DataArray:\n    \"\"\"\n    Constructs a lon/lat grid as a new DataArray based on the cube's spatial resolution\n    and the geographic extent provided in `context`.\n\n    Args:\n        cube (xr.DataArray): Input data cube with 'x' and 'y' dimensions.\n        context (dict): Dictionary containing ''crs'.\n\n    Returns:\n        xr.DataArray: A new DataArray of shape (2, y, x) with bands ['lon', 'lat'].\n    \"\"\"\n\n    crs   = context[\"crs\"]\n    transformer = Transformer.from_crs(crs, \"EPSG:4326\", always_xy=True)\n    # Create a 2D grid of x and y coordinates\n    x, y = np.meshgrid(cube.x.values, cube.y.values)\n\n    # Transform the coordinate grid to lon/lat\n    longitudes, latitudes = transformer.transform(x, y)\n\n    # Build output DataArray\n    return xr.DataArray(\n        data=np.stack([longitudes, latitudes], axis=0),  # shape: (2, y, x)\n        dims=(\"bands\", \"y\", \"x\"),\n        coords={\n            \"bands\": [\"lon\", \"lat\"],\n            \"x\": cube.coords[\"x\"],\n            \"y\": cube.coords[\"y\"]\n        }\n    )"}, "process_id": "run_udf", "result": true}}}}, "process_id": "apply"}, "apply2": {"arguments": {"data": {"from_node": "reducedimension1"}, "process": {"process_graph": {"clip1": {"arguments": {"max": 180, "min": -180, "x": {"from_parameter": "x"}}, "process_id": "clip"}, "divide1": {"arguments": {"x": {"from_node": "subtract1"}, "y": 360}, "process_id": "divide", "result": true}, "subtract1": {"arguments": {"x": {"from_node": "clip1"}, "y": -180}, "process_id": "subtract"}}}}, "process_id": "apply"}, "apply3": {"arguments": {"data": {"from_node": "reducedimension2"}, "process": {"process_graph": {"clip2": {"arguments": {"max": 60, "min": -60, "x": {"from_parameter": "x"}}, "process_id": "clip"}, "divide2": {"arguments": {"x": {"from_node": "subtract2"}, "y": 120}, "process_id": "divide", "result": true}, "subtract2": {"arguments": {"x": {"from_node": "clip2"}, "y": -60}, "process_id": "subtract"}}}}, "process_id": "apply"}, "loadcollection1": {"arguments": {"bands": ["B02", "B03", "B04", "B05", "B06", "B07", "B08", "B11", "B12"], "id": "SENTINEL2_L2A", "properties": {"eo:cloud_cover": {"process_graph": {"lte1": {"arguments": {"x": {"from_parameter": "value"}, "y": 85}, "process_id": "lte", "result": true}}}}, "spatial_extent": {"crs": "EPSG:4326", "east": -122.4, "north": 37.78, "south": 37.74, "west": -122.45}, "temporal_extent": ["2023-06-01", "2023-08-01"]}, "process_id": "load_collection"}, "loadcollection2": {"arguments": {"bands": ["SCL"], "id": "SENTINEL2_L2A", "properties": {"eo:cloud_cover": {"process_graph": {"lte2": {"arguments": {"x": {"from_parameter": "value"}, "y": 85}, "process_id": "lte", "result": true}}}}, "spatial_extent": {"crs": "EPSG:4326", "east": -122.4, "north": 37.78, "south": 37.74, "west": -122.45}, "temporal_extent": ["2023-06-01", "2023-08-01"]}, "process_id": "load_collection"}, "mask1": {"arguments": {"data": {"from_node": "resamplespatial1"}, "mask": {"from_node": "toscldilationmask1"}}, "process_id": "mask"}, "mergecubes1": {"arguments": {"cube1": {"from_node": "adddimension1"}, "cube2": {"from_node": "adddimension2"}}, "process_id": "merge_cubes"}, "reducedimension1": {"arguments": {"data": {"from_node": "renamelabels1"}, "dimension": "bands", "reducer": {"process_graph": {"arrayelement1": {"arguments": {"data": {"from_parameter": "data"}, "index": 0}, "process_id": "array_element", "result": true}}}}, "process_id": "reduce_dimension"}, "reducedimension2": {"arguments": {"data": {"from_node": "renamelabels1"}, "dimension": "bands", "reducer": {"process_graph": {"arrayelement2": {"arguments": {"data": {"from_parameter": "data"}, "index": 1}, "process_id": "array_element", "result": true}}}}, "process_id": "reduce_dimension"}, "renamelabels1": {"arguments": {"data": {"from_node": "resamplespatial3"}, "dimension": "bands", "target": ["lon", "lat"]}, "process_id": "rename_labels"}, "resamplespatial1": {"arguments": {"align": "upper-left", "data": {"from_node": "loadcollection1"}, "method": "near", "projection": "EPSG:3035", "resolution": 10}, "process_id": "resample_spatial"}, "resamplespatial2": {"arguments": {"align": "upper-left", "data": {"from_node": "loadcollection2"}, "method": "near", "projection": "EPSG:3035", "resolution": 10}, "process_id": "resample_spatial"}, "resamplespatial3": {"arguments": {"align": "upper-left", "data": {"from_node": "apply1"}, "method": "near", "projection": "EPSG:3035", "resolution": 10}, "process_id": "resample_spatial"}, "saveresult1": {"arguments": {"data": {"from_node": "mergecubes1"}, "format": "netCDF", "options": {}}, "process_id": "save_result", "result": true}, "toscldilationmask1": {"arguments": {"data": {"from_node": "resamplespatial2"}}, "process_id": "to_scl_dilation_mask"}}, "format": "openeo"}, "processing:facility": "openEO Geotrellis backend", "processing:software": {"Geotrellis backend": "0.66.0a10"}, "roles": ["processor"]}], "stac_extensions": ["https://stac-extensions.github.io/eo/v1.1.0/schema.json", "https://stac-extensions.github.io/file/v2.1.0/schema.json", "https://stac-extensions.github.io/processing/v1.1.0/schema.json", "https://stac-extensions.github.io/projection/v1.1.0/schema.json"], "stac_version": "1.0.0", "summaries": {}, "type": "Collection"}